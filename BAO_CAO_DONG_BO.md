# BÃO CÃO KIá»‚M TRA Äá»’NG Bá»˜ CÃC DANH SÃCH

## Tá»”NG QUAN
Há»‡ thá»‘ng quáº£n lÃ½ cá»­a hÃ ng mÃ¡y tÃ­nh sá»­ dá»¥ng nhiá»u danh sÃ¡ch (manager classes) Ä‘á»ƒ quáº£n lÃ½ dá»¯ liá»‡u. BÃ¡o cÃ¡o nÃ y kiá»ƒm tra tÃ­nh Ä‘á»“ng bá»™ giá»¯a cÃ¡c danh sÃ¡ch.

---

## CÃC Váº¤N Äá»€ Äá»’NG Bá»˜ ÄÃƒ PHÃT HIá»†N

### 1. âš ï¸ Äá»’NG Bá»˜ GIá»®A NHÃ‚N VIÃŠN VÃ€ TÃ€I KHOáº¢N ÄÄ‚NG NHáº¬P

**Váº¥n Ä‘á»:**
- Khi thÃªm nhÃ¢n viÃªn má»›i, tÃ i khoáº£n Ä‘Æ°á»£c táº¡o tá»± Ä‘á»™ng trong `DanhSachNhanVien.them()` (dÃ²ng 64)
- Khi xÃ³a nhÃ¢n viÃªn, tÃ i khoáº£n tÆ°Æ¡ng á»©ng KHÃ”NG Ä‘Æ°á»£c xÃ³a tá»± Ä‘á»™ng
- Khi sá»­a mÃ£ nhÃ¢n viÃªn, tÃ i khoáº£n khÃ´ng Ä‘Æ°á»£c cáº­p nháº­t

**Vá»‹ trÃ­:**
- `DanhSachNhanVien.java`: DÃ²ng 304-337 (xÃ³a nhÃ¢n viÃªn)
- `DanhSachLogin.java`: KhÃ´ng cÃ³ phÆ°Æ¡ng thá»©c xÃ³a tÃ i khoáº£n theo mÃ£ nhÃ¢n viÃªn

**Khuyáº¿n nghá»‹:**
- ThÃªm logic xÃ³a tÃ i khoáº£n khi xÃ³a nhÃ¢n viÃªn
- Cáº­p nháº­t tÃ i khoáº£n khi sá»­a mÃ£ nhÃ¢n viÃªn

---

### 2. âš ï¸ Äá»’NG Bá»˜ GIá»®A PHÃ’NG BAN VÃ€ NHÃ‚N VIÃŠN

**Váº¥n Ä‘á»:**
- Khi xÃ³a phÃ²ng ban, há»‡ thá»‘ng kiá»ƒm tra xem cÃ³ nhÃ¢n viÃªn thuá»™c phÃ²ng ban khÃ´ng (dÃ²ng 180)
- Tuy nhiÃªn, khi xÃ³a nhÃ¢n viÃªn, khÃ´ng cÃ³ kiá»ƒm tra hoáº·c cáº­p nháº­t sá»‘ lÆ°á»£ng nhÃ¢n viÃªn trong phÃ²ng ban
- Khi sá»­a mÃ£ phÃ²ng ban, nhÃ¢n viÃªn thuá»™c phÃ²ng ban Ä‘Ã³ khÃ´ng Ä‘Æ°á»£c cáº­p nháº­t mÃ£ phÃ²ng ban má»›i

**Vá»‹ trÃ­:**
- `DanhSachPhongBan.java`: DÃ²ng 135-164 (xÃ³a phÃ²ng ban)
- `DanhSachNhanVien.java`: DÃ²ng 304-337 (xÃ³a nhÃ¢n viÃªn)

**Khuyáº¿n nghá»‹:**
- Khi xÃ³a nhÃ¢n viÃªn, cáº­p nháº­t thá»‘ng kÃª phÃ²ng ban
- Khi sá»­a mÃ£ phÃ²ng ban, cáº­p nháº­t táº¥t cáº£ nhÃ¢n viÃªn thuá»™c phÃ²ng ban Ä‘Ã³

---

### 3. âš ï¸ Äá»’NG Bá»˜ GIá»®A HÃ“A ÄÆ N VÃ€ CHI TIáº¾T HÃ“A ÄÆ N

**Váº¥n Ä‘á»:**
- Khi xÃ³a hÃ³a Ä‘Æ¡n, chi tiáº¿t hÃ³a Ä‘Æ¡n (file trong thÆ° má»¥c) KHÃ”NG Ä‘Æ°á»£c xÃ³a
- Khi sá»­a hÃ³a Ä‘Æ¡n, chi tiáº¿t Ä‘Æ°á»£c cáº­p nháº­t nhÆ°ng tá»•ng giÃ¡ cÃ³ thá»ƒ khÃ´ng Ä‘á»“ng bá»™

**Vá»‹ trÃ­:**
- `DanhSachHoaDon.java`: DÃ²ng 185-211 (xÃ³a hÃ³a Ä‘Æ¡n)
- `DanhSachChiTietHoaDon.java`: File Ä‘Æ°á»£c lÆ°u riÃªng theo mÃ£ hÃ³a Ä‘Æ¡n

**Khuyáº¿n nghá»‹:**
- Khi xÃ³a hÃ³a Ä‘Æ¡n, xÃ³a file chi tiáº¿t tÆ°Æ¡ng á»©ng
- Äáº£m báº£o tá»•ng giÃ¡ luÃ´n Ä‘Æ°á»£c tÃ­nh tá»« chi tiáº¿t

---

### 4. âš ï¸ Äá»’NG Bá»˜ GIá»®A PHIáº¾U NHáº¬P VÃ€ CHI TIáº¾T PHIáº¾U NHáº¬P

**Váº¥n Ä‘á»:**
- TÆ°Æ¡ng tá»± hÃ³a Ä‘Æ¡n, khi xÃ³a phiáº¿u nháº­p, chi tiáº¿t phiáº¿u nháº­p khÃ´ng Ä‘Æ°á»£c xÃ³a
- Tá»•ng tiá»n cá»§a phiáº¿u nháº­p cÃ³ thá»ƒ khÃ´ng Ä‘á»“ng bá»™ vá»›i chi tiáº¿t

**Vá»‹ trÃ­:**
- `DanhSachPhieuNhapHang.java`: DÃ²ng 203-228 (xÃ³a phiáº¿u nháº­p)
- `DanhSachChiTietPNH.java`: File Ä‘Æ°á»£c lÆ°u riÃªng theo mÃ£ phiáº¿u

**Khuyáº¿n nghá»‹:**
- XÃ³a file chi tiáº¿t khi xÃ³a phiáº¿u nháº­p
- Äáº£m báº£o tá»•ng tiá»n luÃ´n Ä‘Æ°á»£c tÃ­nh tá»« chi tiáº¿t

---

### 5. âš ï¸ Äá»’NG Bá»˜ Tá»’N KHO Sáº¢N PHáº¨M

**Váº¥n Ä‘á»:**
- Khi thÃªm chi tiáº¿t hÃ³a Ä‘Æ¡n, tá»“n kho Ä‘Æ°á»£c trá»« (dÃ²ng 213)
- Khi xÃ³a chi tiáº¿t hÃ³a Ä‘Æ¡n, tá»“n kho Ä‘Æ°á»£c hoÃ n láº¡i (dÃ²ng 254)
- Khi sá»­a chi tiáº¿t hÃ³a Ä‘Æ¡n, tá»“n kho Ä‘Æ°á»£c cáº­p nháº­t (dÃ²ng 319)
- **NHÆ¯NG:** Khi xÃ³a hÃ³a Ä‘Æ¡n, tá»“n kho KHÃ”NG Ä‘Æ°á»£c hoÃ n láº¡i

**Vá»‹ trÃ­:**
- `DanhSachChiTietHoaDon.java`: DÃ²ng 243-268 (xÃ³a chi tiáº¿t)
- `DanhSachHoaDon.java`: DÃ²ng 185-211 (xÃ³a hÃ³a Ä‘Æ¡n - thiáº¿u hoÃ n kho)

**Khuyáº¿n nghá»‹:**
- Khi xÃ³a hÃ³a Ä‘Æ¡n, Ä‘á»c chi tiáº¿t vÃ  hoÃ n láº¡i tá»“n kho cho táº¥t cáº£ sáº£n pháº©m

---

### 6. âš ï¸ Äá»’NG Bá»˜ Tá»’N KHO KHI NHáº¬P HÃ€NG

**Váº¥n Ä‘á»:**
- Khi thÃªm chi tiáº¿t phiáº¿u nháº­p, tá»“n kho Ä‘Æ°á»£c cá»™ng (dÃ²ng 242)
- Khi xÃ³a chi tiáº¿t phiáº¿u nháº­p, tá»“n kho Ä‘Æ°á»£c trá»« láº¡i (dÃ²ng 276)
- **NHÆ¯NG:** Khi xÃ³a phiáº¿u nháº­p, tá»“n kho KHÃ”NG Ä‘Æ°á»£c trá»« láº¡i

**Vá»‹ trÃ­:**
- `DanhSachChiTietPNH.java`: DÃ²ng 265-290 (xÃ³a chi tiáº¿t)
- `DanhSachPhieuNhapHang.java`: DÃ²ng 203-228 (xÃ³a phiáº¿u nháº­p - thiáº¿u trá»« kho)

**Khuyáº¿n nghá»‹:**
- Khi xÃ³a phiáº¿u nháº­p, Ä‘á»c chi tiáº¿t vÃ  trá»« láº¡i tá»“n kho cho táº¥t cáº£ sáº£n pháº©m

---

### 7. âš ï¸ Äá»’NG Bá»˜ GIá»®A HÃ“A ÄÆ N VÃ€ KHÃCH HÃ€NG/NHÃ‚N VIÃŠN

**Váº¥n Ä‘á»:**
- Khi xÃ³a khÃ¡ch hÃ ng, khÃ´ng kiá»ƒm tra xem cÃ³ hÃ³a Ä‘Æ¡n nÃ o liÃªn quan khÃ´ng
- Khi xÃ³a nhÃ¢n viÃªn, khÃ´ng kiá»ƒm tra xem cÃ³ hÃ³a Ä‘Æ¡n nÃ o do nhÃ¢n viÃªn Ä‘Ã³ táº¡o khÃ´ng

**Vá»‹ trÃ­:**
- `DanhSachKhachHang.java`: DÃ²ng 284-316 (xÃ³a khÃ¡ch hÃ ng)
- `DanhSachNhanVien.java`: DÃ²ng 304-337 (xÃ³a nhÃ¢n viÃªn)
- `DanhSachHoaDon.java`: CÃ³ tham chiáº¿u Ä‘áº¿n mÃ£ khÃ¡ch hÃ ng vÃ  mÃ£ nhÃ¢n viÃªn

**Khuyáº¿n nghá»‹:**
- Kiá»ƒm tra rÃ ng buá»™c trÆ°á»›c khi xÃ³a khÃ¡ch hÃ ng/nhÃ¢n viÃªn
- Hoáº·c Ä‘áº·t mÃ£ khÃ¡ch hÃ ng/nhÃ¢n viÃªn thÃ nh null khi xÃ³a

---

### 8. âš ï¸ Äá»’NG Bá»˜ GIá»®A PHIáº¾U NHáº¬P VÃ€ NHÃ€ CUNG Cáº¤P/NHÃ‚N VIÃŠN

**Váº¥n Ä‘á»:**
- TÆ°Æ¡ng tá»± hÃ³a Ä‘Æ¡n, khi xÃ³a nhÃ  cung cáº¥p hoáº·c nhÃ¢n viÃªn, khÃ´ng kiá»ƒm tra phiáº¿u nháº­p

**Vá»‹ trÃ­:**
- `DanhSachNhaCungCap.java`: DÃ²ng 145-175 (xÃ³a nhÃ  cung cáº¥p)
- `DanhSachPhieuNhapHang.java`: CÃ³ tham chiáº¿u Ä‘áº¿n mÃ£ NCC vÃ  mÃ£ NV

**Khuyáº¿n nghá»‹:**
- Kiá»ƒm tra rÃ ng buá»™c trÆ°á»›c khi xÃ³a

---

### 9. âš ï¸ Äá»’NG Bá»˜ Dá»® LIá»†U KHI Äá»ŒC FILE

**Váº¥n Ä‘á»:**
- Trong `QuanLyCuaHangMayTinh.khoiTaoDuLieu()`, thá»© tá»± Ä‘á»c file cÃ³ thá»ƒ gÃ¢y váº¥n Ä‘á»:
  - Äá»c phÃ²ng ban trÆ°á»›c nhÃ¢n viÃªn (Ä‘Ãºng)
  - Äá»c hÃ³a Ä‘Æ¡n trÆ°á»›c chi tiáº¿t hÃ³a Ä‘Æ¡n (cÃ³ thá»ƒ gÃ¢y lá»—i náº¿u chi tiáº¿t khÃ´ng tá»“n táº¡i)
  - Äá»c phiáº¿u nháº­p trÆ°á»›c chi tiáº¿t phiáº¿u nháº­p (tÆ°Æ¡ng tá»±)

**Vá»‹ trÃ­:**
- `QuanLyCuaHangMayTinh.java`: DÃ²ng 38-85

**Khuyáº¿n nghÄ©:**
- Thá»© tá»± Ä‘á»c hiá»‡n táº¡i lÃ  há»£p lÃ½, nhÆ°ng cáº§n xá»­ lÃ½ lá»—i tá»‘t hÆ¡n khi file chi tiáº¿t khÃ´ng tá»“n táº¡i

---

### 10. âš ï¸ Äá»’NG Bá»˜ KHI GHI FILE

**Váº¥n Ä‘á»:**
- Khi ghi hÃ³a Ä‘Æ¡n, chi tiáº¿t hÃ³a Ä‘Æ¡n Ä‘Æ°á»£c ghi (dÃ²ng 78-82)
- Khi ghi phiáº¿u nháº­p, chi tiáº¿t phiáº¿u nháº­p KHÃ”NG Ä‘Æ°á»£c ghi (dÃ²ng 69-72 bá»‹ comment)

**Vá»‹ trÃ­:**
- `DanhSachHoaDon.java`: DÃ²ng 78-82 (ghi chi tiáº¿t)
- `DanhSachPhieuNhapHang.java`: DÃ²ng 69-72 (khÃ´ng ghi chi tiáº¿t)

**Khuyáº¿n nghá»‹:**
- ThÃªm logic ghi chi tiáº¿t phiáº¿u nháº­p khi ghi phiáº¿u nháº­p

---

## TÃ“M Táº®T CÃC Váº¤N Äá»€

| STT | Váº¥n Ä‘á» | Má»©c Ä‘á»™ | File liÃªn quan |
|-----|--------|--------|----------------|
| 1 | XÃ³a nhÃ¢n viÃªn khÃ´ng xÃ³a tÃ i khoáº£n | ğŸ”´ Cao | DanhSachNhanVien, DanhSachLogin |
| 2 | XÃ³a hÃ³a Ä‘Æ¡n khÃ´ng hoÃ n láº¡i tá»“n kho | ğŸ”´ Cao | DanhSachHoaDon, DanhSachChiTietHoaDon |
| 3 | XÃ³a phiáº¿u nháº­p khÃ´ng trá»« láº¡i tá»“n kho | ğŸ”´ Cao | DanhSachPhieuNhapHang, DanhSachChiTietPNH |
| 4 | XÃ³a hÃ³a Ä‘Æ¡n khÃ´ng xÃ³a file chi tiáº¿t | ğŸŸ¡ Trung bÃ¬nh | DanhSachHoaDon |
| 5 | XÃ³a phiáº¿u nháº­p khÃ´ng xÃ³a file chi tiáº¿t | ğŸŸ¡ Trung bÃ¬nh | DanhSachPhieuNhapHang |
| 6 | XÃ³a khÃ¡ch hÃ ng khÃ´ng kiá»ƒm tra rÃ ng buá»™c | ğŸŸ¡ Trung bÃ¬nh | DanhSachKhachHang, DanhSachHoaDon |
| 7 | XÃ³a nhÃ¢n viÃªn khÃ´ng kiá»ƒm tra rÃ ng buá»™c | ğŸŸ¡ Trung bÃ¬nh | DanhSachNhanVien, DanhSachHoaDon |
| 8 | Sá»­a mÃ£ phÃ²ng ban khÃ´ng cáº­p nháº­t nhÃ¢n viÃªn | ğŸŸ¡ Trung bÃ¬nh | DanhSachPhongBan, DanhSachNhanVien |
| 9 | Ghi phiáº¿u nháº­p khÃ´ng ghi chi tiáº¿t | ğŸŸ¢ Tháº¥p | DanhSachPhieuNhapHang |

---

## KHUYáº¾N NGHá»Š Tá»”NG THá»‚

1. **ThÃªm phÆ°Æ¡ng thá»©c kiá»ƒm tra rÃ ng buá»™c** trÆ°á»›c khi xÃ³a cÃ¡c entity cÃ³ quan há»‡
2. **HoÃ n láº¡i tá»“n kho** khi xÃ³a hÃ³a Ä‘Æ¡n/phiáº¿u nháº­p
3. **XÃ³a file chi tiáº¿t** khi xÃ³a hÃ³a Ä‘Æ¡n/phiáº¿u nháº­p
4. **Äá»“ng bá»™ tÃ i khoáº£n** khi thÃªm/sá»­a/xÃ³a nhÃ¢n viÃªn
5. **Cáº­p nháº­t tham chiáº¿u** khi sá»­a mÃ£ cá»§a cÃ¡c entity cÃ³ quan há»‡
6. **ThÃªm transaction** Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh nháº¥t quÃ¡n dá»¯ liá»‡u

---

## Káº¾T LUáº¬N

Há»‡ thá»‘ng cÃ³ nhiá»u váº¥n Ä‘á» Ä‘á»“ng bá»™ cáº§n Ä‘Æ°á»£c xá»­ lÃ½, Ä‘áº·c biá»‡t lÃ :
- Äá»“ng bá»™ tá»“n kho khi xÃ³a hÃ³a Ä‘Æ¡n/phiáº¿u nháº­p
- Äá»“ng bá»™ tÃ i khoáº£n khi xÃ³a nhÃ¢n viÃªn
- XÃ³a file chi tiáº¿t khi xÃ³a hÃ³a Ä‘Æ¡n/phiáº¿u nháº­p

CÃ¡c váº¥n Ä‘á» nÃ y cÃ³ thá»ƒ gÃ¢y máº¥t dá»¯ liá»‡u hoáº·c dá»¯ liá»‡u khÃ´ng nháº¥t quÃ¡n trong há»‡ thá»‘ng.

